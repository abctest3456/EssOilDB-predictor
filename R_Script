##info file for all plants into EssOilDB

plant_info <- read_csv("C:/Users/hadoop_pc/Desktop/info_files/Plant_info_9April.csv")

##info file for all compounds into EssOilDB

comp_info <- read.csv("C:/Users/hadoop_pc/Desktop/info_files/comp_info_9April.csv")

## Command to check dimension.
dim(plant_info)

## Command to check dimension.
dim(comp_info)


library(sqldf)

#### Getting article details for Lantana camara as Paper_code as unique field.
plant_info_LC <- sqldf("Select * from plant_info where Plant_name='Lantana camara'")


#### Getting all discussed compounds of Lantana camara using join operation and sqlquery.
comp_info_LC <- sqldf("Select * from plant_info_LC JOIN comp_info USING(Paper_code)")


## Example/Sample
## inner join
df3 <- sqldf("SELECT CustomerId, Product, State 
              FROM df1
              JOIN df2 USING(CustomerID)")

## left join (substitute 'right' for right join)
df4 <- sqldf("SELECT CustomerId, Product, State 
              FROM df1
              LEFT JOIN df2 USING(CustomerID)")
              
              
 ### getting count of unique values of each column 
 
 rapply(df3,function(x)length(unique(x)))
 
 unique(df3[c("Paper_code")])
 
 ### Get count for the unique values
 
 dim(unique(df3[c("Paper_code")]))
 
 ### merge the data frame 
 
  df4 <- merge(df1,df2, by = "Paper_code")
  
  ### Aggregate rows based on column values
  
  t <- aggregate(table[,2:4], list(table[,1]), function(x) paste0(unique(x)))
  
  dim(t)
  
  ### Get dataframe structure
  
  dim(df3)
  
  str(df3)
  
  ###Subset of the dataframe 
  data <- subset(comp_info_LC, select=c(2,11,13,14,17,18,19,20))
  
  #### Reorder by column number
data[c(1,3,2)]

  ### Reorder by column name
data[c("size", "id", "weight")]
  
  ### writing to csv file
   write.csv(data,"C:/Users/hadoop_pc/Desktop/info_files/comp_info_LC_RStudio.csv")
   
#######14 April

########18 April
sql query to get specified plant name columns corresponding compound_name and quantity.

> OG<- sqldf("Select * from one_sheet where Plant_name='Ocimum gratissimum'")
> OG <- subset(OG, select=c(2,15,4))
> OG<-t(OG)
> colnames(OG) <- OG[1,]
> OG<-OG[-1,]
> dim(OG)
[1]   2 305

### bind_rows over all above geberated data - OS,OB,LC,OG,NT.

> data_OS_OB_LC_OG_NT<-bind_rows(data.frame(OS),data.frame(OB),data.frame(LC),data.frame(OG),data.frame(NT))

#### removing duplicates (column names) from the data frame

data_OS_OB_LC_OG_NT<-data_OS_OB_LC_OG_NT[,!duplicated(colnames(data_OS_OB_LC_OG_NT))]

#### subsetting the dataframe

data_A[data_A$id %in% data_B$id,]

# Rename a column in R
colnames(data)[colnames(data)=="old_name"] <- "new_name"
> colnames(l)[colnames(l)=="X.Lantana.camara."] <- "plant_name

#### matrix forming

m1 <- matrix(C<-(0),nrow=1841, ncol=7159)

###load csv and convert to matrix

temp = read.csv("C:/Users/hadoop_pc/Desktop/empty_matrix_sheet.csv", sep=",", row.names=1)
temp1 <- as.matrix(temp) 
class(temp1)

### correcting column header

#### correcting column names as of same as column entries.
temp20 = read.csv("C:/Users/hadoop_pc/Desktop/empty_matrix_sheet.csv", sep=",", row.names=1,check.names=FALSE)
